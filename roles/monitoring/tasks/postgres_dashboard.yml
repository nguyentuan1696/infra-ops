---
- name: Ensure provisioning folder exists
  file:
    path: ./grafana/provisioning/dashboards
    state: directory
    recurse: true

- name: Ensure dashboards folder exists
  file:
    path: ./grafana/dashboards
    state: directory
    recurse: true

- name: Copy dashboard config provisioning file
  template:
    src: dashboards.yml.j2
    dest: ./grafana/provisioning/dashboards/dashboards.yml

- name: Copy Postgres dashboard JSON
  copy:
    src: dashboards/postgresql_dashboard.json
    dest: ./grafana/dashboards/postgresql_dashboard.json
